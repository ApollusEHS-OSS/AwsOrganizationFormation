AWSTemplateFormatVersion: '2010-09-09-OC'
Description:

Organization: !Include ./organization.yml
OrganizationBindingsRegions: 'eu-west-1'

Resources:

  Topic:
    Type: AWS::SNS::Topic
    DependsOnAccount:
      - !Ref Account2
      - !Ref Account2
      - !Ref Account2
    DependsOnRegion:
      - us-east-1
      - us-east-1
      - us-east-1
    OrganizationBindings:
      Accounts: !Ref Account1
    Properties:
      DisplayName: Topic in eu-west-1 that depends on us-east-1

  Topic2:
    Type: AWS::SNS::Topic
    DependsOnAccount:
      - !Ref Account2
      - !Ref Account2
      - !Ref Account2
    DependsOnRegion:
      - us-east-1
      - us-east-1
      - us-east-1
    OrganizationBindings:
      Accounts: !Ref Account1
    Properties:
      DisplayName: Topic in eu-west-1 that depends on us-east-1

  S3Bucket:
    Type: AWS::S3::Bucket
    OrganizationBindings:
      Accounts: !Ref Account2
      Regions: us-east-1
    Properties:
      BucketName: Bucket in us-east-1
