
OrganizationUpdate:
  Type: update-organization
  Template: ./organization.yml

BudgetAlarms:
  Type: update-stacks
  Template: ./budget-alarms.yml
  StackName: budget-alarms
  DefaultOrganizationBindingRegion: eu-central-1
  DefaultOrganizationBinding:
    AccountsWithTag: budget-alarm-threshold
  Parameters:
    resourcePrefix: my

DeveloperRole:
  Type: update-stacks
  Template: ./cross-account-role.yml
  StackName: my-developer-role
  StackDescription: Developer Role Example
  TerminationProtection: true
  Parameters:
    resourcePrefix: my
    roleName: developer-role
    rolePolicyArns:
      - arn:aws:iam::aws:policy/PowerUserAccess
  OrganizationBindings:
    AssumeRoleBinding:
      Account: !Ref SharedUsersAccount
    RoleBinding:
      OrganizationalUnit: !Ref DevelopmentOU
      ExcludeAccount: !Ref SharedUsersAccount

FinanceRole:
  Type: update-stacks
  Template: ./cross-account-role.yml
  StackName: my-finance-role
  StackDescription: Finance Role Example
  TerminationProtection: true
  Parameters:
    resourcePrefix: my
    roleName: finance-role
    rolePolicyArns:
      - arn:aws:iam::aws:policy/Billing
  OrganizationBindings:
    AssumeRoleBinding:
      Account: !Ref SharedUsersAccount
    RoleBinding:
      IncludeMasterAccount: true

# CrossAccountBuckets:
#   Type: update-stacks
#   Template: ./cross-account-bucket.yml
#   StackName: MyBucket
#   Parameters:
#     bucketName: myBucket

# CrossAccountSecret:
#   Type: update-stacks
#   Template: ./cross-account-secret.yml
#   StackName: MySecret
#   Parameters:
#     secretName: myBucket

# CrossAccountLambda:
#   Type: update-stacks
#   Template: ./cross-account-lambda.yml
#   StackName: MyLambda
#   Parameters:
#     functionName: myLambda

# HostedZone:
#   Type: update-stacks
#   Template: ./hosted-zone.yml
#   StackName: hosted-zone
#   StackDescription: 'Hosted Zone example template'

# CloudTrail:
#   Type: update-stacks
#   Template: ./cloudtrail.yml
#   StackName: cloudtrail
#   StackDescription: 'Cloudtrail example template'

# Include:
#   Type: include
#   Path: ./build-tasks-include.yml
#   MaxConcurrentTasks: 10
#   FailedTaskTolerance: 10
